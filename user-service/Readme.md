# 1. 세션 기반 인증
 - 세션 기반 인증 방식은 서버가 클라이언트의 세션 정보를 저장하고 있는 stateful 방식 이다.
<img>
## 특징
 - 사용자가 로그인을 하게되면 서버는 사용자 정보 검증후 세션 id를 발급하고 브라우저의 쿠키에 저장한다
 - 브라우저는 모든 요청마다 쿠키에 있는 세션 id를 포함하고 서버는 세션 id를 통해 유저 정보를 세션 스토리지에서 조회한다.
 - 일반적으로 서버메몰, 데이터베이스 등을 사용해 세션을 저장한다
 - 세션은 서버에서 `만료(invalidate)` 시켜서 클라이언트의 권한을 회수 할 수 있다
## 단점
 - 서버 확장이 어렵다. 분산 환경에서는 세션을 공유할 수 있는 세션 클러스터링이 필요하다
 - 중앙에서 세션을 관리할 수 있는 세션 데이터 베이스를 구축해야한다
 - 요청이 많아지면 세션 조회에 따른 데이터베이스 부하가 심해질 수 있다.



# 2. 토큰 기반 인증
 - 토큰 기반 인증 방식은 서버가 클라이언트의 세션을 저장하지 않기 때문에 `stateless` 방식이다
 - 대표적으로 JWT(JSON Web Token) 이 있다
<img>

## 특징
 - 사용자가 로그인을 하게되면 서버는 사용자 정보 검증 후 토큰을 발급하고 응답으로 내려준다
 - 클라이언트는 토큰을 저장하고 있다가 `Authorization` 헤더에 토큰을 전달한다
 - 서버가 분산된 환경에서도 서버에선 클러스터링 처리가 필요 없다는 것이 장점이다
 - JWT 토큰 내부에는 기본적인 정보와 검증된 토큰임을 증며하는 서명과 같은 유용한 정보를 가지고 있다
 - 토큰안에 유용한 정보를 담고 있어서 I/O 작업을 하지 않아도 된다
## 단점
 - 한번 발행된 토큰은 클라이언트가 보관하고 있으므로 회수하기 어렵다
 - 회수가 어렵고 탈취되면 대처가 어려우므로 만료 시간을 짧게 가져가야 한다
 - 토큰이 길어지면 네트워크 부하가 커질 수 있다
 - 페이로드는 암호회된 정보가 아니기 때문에 민감정보를 담아선 안된다
 - JWT의 경우 단일키를 사용하기 때문에 시크릿 키가 유출되면 보안 취약사항이된다
 - 
# [jwt.io](https://jwt.io)
 - jwt를 볼수 있게 제공함.  구성요소듣을 `.` 으로 구분함
 - header 토큰의 타입과 서명 알고리즘 정보를 헤더에 정의. 
 - payload 페이로드에 데이터를 담을수 있음. 토큰 발급자,토큰의 유효기간 유저정보등
 - verify signature : 보안서명. 메시지가 전송과정에서 바뀌지 않았다는 것을 확인



```powershell
C:\Users\fuga>netstat -ano|find str 9090
FIND: Parameter format not correct

C:\Users\fuga>netstat -ano|findstr 9090
  TCP    0.0.0.0:9090           0.0.0.0:0              LISTENING       9732
  TCP    [::]:9090              [::]:0                 LISTENING       9732

C:\Users\fuga>tasklist /FI "PID eq 9732"

Image Name                     PID Session Name        Session#    Mem Usage
========================= ======== ================ =========== ============
java.exe                      9732 Console                    6     48,912 K
```
